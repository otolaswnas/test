3 * (
sum by (openshiftcluster) (
max by (openshiftcluster, job) (
up{job="apiserver|kube-apiserver|etcd", openshiftcluster="openshiftcluster"} == 1 ) ) < bool 2 ) + ( sum by (openshiftcluster) ( max by (openshiftcluster, job) ( up{job=~"apiserver|kube-apiserver|etcd", openshiftcluster=~"openshiftcluster"} == 1
)
) == bool 2
)
*
(
2 * (
min by (openshiftcluster) (
cluster_operator_conditions{
condition="Available", status="True",
name="etcd|kube-apiserver", openshiftcluster="openshiftcluster" } ) == bool 0 ) + clamp_max( sum by (openshiftcluster) ( cluster_operator_conditions{ condition="Degraded", status="True", name=~"etcd|kube-apiserver", openshiftcluster=~"openshiftcluster"
}
),
1
)
)
, 3)
