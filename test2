# 3 = brak danych (którykolwiek z krytycznych jobów nie odpowiada)
3 * (min(up{job=~"kube-apiserver|etcd", openshiftcluster="openshiftcluster"}) == 0)
+
# 2 = krytyczny (etcd lub apiserver Available != 1)
( min(cluster_operator_conditions{condition="Available",name=~"etcd|kube-apiserver",openshiftcluster="openshiftcluster"}) == 0 ) * 2
+
# 1 = anomalie (obaj Available=1, ale którykolwiek Degraded=1)
( min(cluster_operator_conditions{condition="Available",name=~"etcd|kube-apiserver",openshiftcluster="openshiftcluster"}) == 1 )
* clamp_max(sum(cluster_operator_conditions{condition="Degraded",name=~"etcd|kube-apiserver",openshiftcluster="openshiftcluster"} == 1), 1)
